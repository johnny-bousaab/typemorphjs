{"version":3,"file":"typemorph.esm.js","sources":["../src/defaultConfigs.js","../src/helpers.js","../src/typemorph.js"],"sourcesContent":["export const defaultConfigs = {\r\n  text: null,\r\n  parent: null, // HTML element or string\r\n  speed: 50, // ms per character\r\n  chunkSize: 1,\r\n  loopCount: Infinity,\r\n  loopType: \"backspace\", // \"clear\" or \"backspace\"\r\n  loopFinalBehavior: \"keep\", // \"keep\" or \"remove\" -> removing type depends on loopType\r\n  loopStartDelay: 300, // ms to wait before typing again, after backspacing/clearing, in each loop (applies after first loop, meaning loop has to be > 1)\r\n  loopEndDelay: 800, // ms to wait after typing, before backspacing/clearing, in each loop (applies after first loop, meaning loop has to be > 1)\r\n  backspaceSpeed: 50, // speed per character when backspacing. Used when loopType is \"backspace\"\r\n  showCursor: true,\r\n  cursorChar: \"|\",\r\n  parseMarkdown: false, // if true, will parse makrdown syntax to HTML, meaning parseHtml is implied\r\n  markdownInline: false, // whether to parse markdown inline, can be helpful to avoid unwanted wrappers for simple text\r\n  parseHtml: true,\r\n  markdownParse: null, // custom markdown parse function -> markdownParse(text, inline = false)\r\n  hideCursorOnFinishTyping: true,\r\n  autoScroll: true,\r\n  scrollContainer: null, // custom scroll container. If not provided, the current typing parent is the target for autoscroll\r\n  scrollInterval: 1, // chunks typed before scroll is triggered when typing\r\n  clearBeforeTyping: true, // if type() was used on same parent, whether to clear text content before typing again\r\n  htmlSanitize: null, // custom html sanitize function -> htmlSanitize(html)\r\n  onStop: (instance) => {}, // typing has been stopped callback\r\n  onFinish: (instance) => {}, // typing naturally finished callback\r\n  onDestroy: (instance) => {}, // on instance destroy callback\r\n};\r\n","const CURSOR_CSS = `.typemorph-cursor {\r\n  display: inline-block;\r\n  animation: blink 1s step-start infinite;\r\n}\r\n\r\n@keyframes blink {\r\n  50% {\r\n    opacity: 0;\r\n  }\r\n}`;\r\n\r\nexport function injectCursorCSS() {\r\n  if (document.getElementById(\"typemorph-cursor-style\")) return;\r\n  const style = document.createElement(\"style\");\r\n  style.id = \"typemorph-cursor-style\";\r\n  style.textContent = CURSOR_CSS;\r\n  document.head.appendChild(style);\r\n}\r\n\r\nexport async function safeCallback(callback, ...args) {\r\n  if (typeof callback === \"function\") {\r\n    try {\r\n      const result = callback(...args);\r\n      if (result instanceof Promise) {\r\n        await result;\r\n      }\r\n    } catch (error) {\r\n      console.warn(\"TypeMorph: User callback error:\", error);\r\n    }\r\n  }\r\n}\r\n","import { defaultConfigs } from \"./defaultConfigs.js\";\r\nimport { injectCursorCSS, safeCallback } from \"./helpers.js\";\r\n\r\ninjectCursorCSS();\r\n\r\n/**\r\n * TypeMorph: Core typing animation\r\n * Handles typing, backspacing, and looping animations\r\n * Supports Markdown & HTML\r\n */\r\nexport default class TypeMorph {\r\n  constructor(config = {}) {\r\n    if (typeof document === \"undefined\") {\r\n      throw new Error(\"TypeMorph requires a DOM environment\");\r\n    }\r\n\r\n    this.config = { ...defaultConfigs, ...config };\r\n\r\n    if (this.config.parent) this._setParent(this.config.parent);\r\n    if (this.config.text) this._setText(this.config.text);\r\n    if (this.config.scrollContainer)\r\n      this._setScrollContainer(this.config.scrollContainer);\r\n\r\n    this.speed = this.config.speed;\r\n    this.backspaceSpeed = this.config.backspaceSpeed;\r\n    this.cursorChar = this.config.cursorChar;\r\n    this.chunkSize = this.config.chunkSize;\r\n    this.scrollInterval = this.config.scrollInterval;\r\n\r\n    this._currentLoop = 0;\r\n    this._cursorEl = null;\r\n    this._abortController = null;\r\n    this._destroyed = false;\r\n    this._isTyping = false;\r\n    this._operationQueue = Promise.resolve();\r\n    this._activeTimers = new Set();\r\n    this._userScrolled = false;\r\n    this._scrollListener = null;\r\n\r\n    this._validateOptions(this.config);\r\n  }\r\n\r\n  /**\r\n   * Type text character by character\r\n   * @param {string} text - Text to type\r\n   * @param {HTMLElement|string} parent - Parent element or selector\r\n   * @param {object} options - Additional options to override instance config for current operation\r\n   */\r\n  async type(text, parent = null, options = {}) {\r\n    this._checkLifetime();\r\n    const { _parent, _options } = this._readOptions(parent, options);\r\n    this._validateOptions(_options);\r\n    await this._cancelCurrentOperation(_options);\r\n    return this._startOperation(async (signal) => {\r\n      this._createCursor(_options);\r\n      await this._type(\r\n        text,\r\n        _parent,\r\n        { ..._options, loopSource: false },\r\n        signal\r\n      );\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Stop current operation\r\n   */\r\n  async stop() {\r\n    this._checkLifetime();\r\n    await this._cancelCurrentOperation();\r\n    await safeCallback(this.config.onStop, this);\r\n  }\r\n\r\n  /**\r\n   * Loop typing animation\r\n   * @param {string} text - Text to type in loop\r\n   * @param {HTMLElement|string} parent - Parent element or selector\r\n   * @param {object} options - Additional options to override instance config for current operation\r\n   */\r\n  async loop(text = null, parent = null, options = {}) {\r\n    this._checkLifetime();\r\n    const { _parent, _options } = this._readOptions(parent, options);\r\n    this._validateOptions(_options);\r\n    await this._cancelCurrentOperation(_options);\r\n    return this._startOperation(async (signal) => {\r\n      await this._loop(text, _parent, signal, _options);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Destroy the instance and cleanup\r\n   */\r\n  destroy() {\r\n    if (this._destroyed) return;\r\n\r\n    this.stop();\r\n    this._abortController = null;\r\n    this._removeCursor();\r\n    this._clearScrollListener();\r\n    this._destroyed = true;\r\n\r\n    safeCallback(this.config.onDestroy, this);\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {boolean} - Whether the instance is currently typing\r\n   */\r\n  isTyping() {\r\n    return this._isTyping;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {boolean} - Whether the instance is destroyed\r\n   */\r\n  isDestroyed() {\r\n    return this._destroyed;\r\n  }\r\n\r\n  /**\r\n   *\r\n   * @returns {number} - Current loop iteration (0-based)\r\n   */\r\n  getCurrentLoop() {\r\n    return this._currentLoop;\r\n  }\r\n\r\n  async _loop(text, parent, signal, options) {\r\n    this._createCursor(options);\r\n    this._currentLoop = 0;\r\n    this._isTyping = true;\r\n\r\n    const targetParent = this._resolveParent(parent);\r\n    const targetText = this._resolveText(text);\r\n\r\n    const clearBeforeTyping =\r\n      options?.clearBeforeTyping ?? this.config.clearBeforeTyping;\r\n    const loopStartDelay =\r\n      options?.loopStartDelay ?? this.config.loopStartDelay;\r\n    const loopEndDelay = options?.loopEndDelay ?? this.config.loopEndDelay;\r\n    const loopType = options?.loopType ?? this.config.loopType;\r\n    const loopCount = options?.loopCount ?? this.config.loopCount;\r\n    const loopFinalBehavior =\r\n      options?.loopFinalBehavior ?? this.config.loopFinalBehavior;\r\n\r\n    options.scrollContainer = this._getScrollContainer(targetParent, options);\r\n\r\n    if (clearBeforeTyping) {\r\n      this._clearContent(targetParent);\r\n    }\r\n\r\n    this._setupScrollTracking(options.scrollContainer);\r\n\r\n    try {\r\n      do {\r\n        if (signal.aborted) break;\r\n\r\n        const willStillBeLooping =\r\n          this._currentlyLooping(targetParent) &&\r\n          this._currentLoop < loopCount - 1;\r\n        const isFinalLoop =\r\n          this._currentlyLooping(targetParent) &&\r\n          this._currentLoop + 1 >= loopCount;\r\n\r\n        if (\r\n          this._currentlyLooping(targetParent) &&\r\n          this._currentLoop > 0 &&\r\n          loopStartDelay\r\n        ) {\r\n          await this._delay(loopStartDelay, signal);\r\n        }\r\n\r\n        await this._type(\r\n          targetText,\r\n          targetParent,\r\n          { ...options, loopSource: true },\r\n          signal\r\n        );\r\n\r\n        if (signal.aborted) break;\r\n\r\n        const willClear =\r\n          this._currentlyLooping(targetParent) &&\r\n          (willStillBeLooping ||\r\n            (isFinalLoop && loopFinalBehavior === \"remove\"));\r\n\r\n        if (willClear && loopEndDelay) {\r\n          await this._delay(loopEndDelay, signal);\r\n        }\r\n\r\n        if (willClear) {\r\n          if (loopType === \"clear\") {\r\n            this._clearContent(targetParent);\r\n          } else {\r\n            await this._backspaceContent(\r\n              targetParent,\r\n              targetParent,\r\n              signal,\r\n              options\r\n            );\r\n          }\r\n        }\r\n\r\n        this._currentLoop++;\r\n      } while (\r\n        this._currentlyLooping(targetParent) &&\r\n        this._currentLoop < loopCount &&\r\n        !signal.aborted\r\n      );\r\n\r\n      if (!signal.aborted) {\r\n        await this._onFinish();\r\n      }\r\n    } finally {\r\n      this._isTyping = false;\r\n    }\r\n  }\r\n\r\n  async _type(text, parent, options, signal) {\r\n    const targetParent = options.loopSource\r\n      ? parent\r\n      : this._resolveParent(parent);\r\n    const targetText = options.loopSource ? text : this._resolveText(text);\r\n\r\n    options.scrollContainer = options.loopSource\r\n      ? options.scrollContainer\r\n      : this._getScrollContainer(targetParent, options);\r\n\r\n    if (!options.loopSource) this._setupScrollTracking(options.scrollContainer);\r\n\r\n    this._isTyping = true;\r\n\r\n    const parseMarkdown = options?.parseMarkdown ?? this.config.parseMarkdown;\r\n    const parseHtml = options?.parseHtml ?? this.config.parseHtml;\r\n    const clearBeforeTyping =\r\n      options?.clearBeforeTyping ?? this.config.clearBeforeTyping;\r\n    const markdownInline =\r\n      options?.markdownInline ?? this.config.markdownInline;\r\n    const markdownParse = options?.markdownParse ?? this.config.markdownParse;\r\n\r\n    if (clearBeforeTyping && !options?.loopSource && !signal.aborted) {\r\n      this._clearContent(targetParent);\r\n    }\r\n\r\n    try {\r\n      let contentToType = targetText;\r\n\r\n      if (parseMarkdown) {\r\n        const parseMethod = markdownInline ? \"parseInline\" : \"parse\";\r\n\r\n        const result = markdownParse\r\n          ? markdownParse(contentToType, markdownInline)\r\n          : (await getDeps()).marked[parseMethod](contentToType);\r\n\r\n        contentToType = result instanceof Promise ? await result : result;\r\n      }\r\n\r\n      if (parseHtml || parseMarkdown) {\r\n        await this._typeHTML(contentToType, targetParent, signal, options);\r\n      } else {\r\n        await this._typeText(contentToType, targetParent, signal, options);\r\n      }\r\n\r\n      if (!options?.loopSource && !signal.aborted) {\r\n        await this._onFinish(options);\r\n      }\r\n    } finally {\r\n      if (!options?.loopSource) {\r\n        this._isTyping = false;\r\n      }\r\n    }\r\n  }\r\n\r\n  _createCursor(options = {}) {\r\n    const showCursor = options?.showCursor ?? this.config.showCursor;\r\n    const cursorChar = options?.cursorChar ?? this.cursorChar;\r\n\r\n    if (!showCursor) {\r\n      this._removeCursor();\r\n      return;\r\n    }\r\n\r\n    if (this._cursorEl) {\r\n      this._cursorEl.textContent = cursorChar;\r\n      return;\r\n    }\r\n\r\n    this._cursorEl = document.createElement(\"span\");\r\n    this._cursorEl.textContent = cursorChar;\r\n    this._cursorEl.className = \"typemorph-cursor\";\r\n    this._cursorEl.setAttribute(\"data-typemorph-cursor\", \"true\");\r\n  }\r\n\r\n  async _typeHTML(html, parent, signal, options) {\r\n    const htmlSanitize = options?.htmlSanitize ?? this.config.htmlSanitize;\r\n    const result = htmlSanitize\r\n      ? htmlSanitize(html)\r\n      : (await getDeps()).DOMPurify.sanitize(html);\r\n\r\n    html = result instanceof Promise ? await result : result;\r\n\r\n    const parser = new DOMParser();\r\n    const doc = parser.parseFromString(html, \"text/html\");\r\n    await this._typeNode(parent, doc.body, signal, options);\r\n  }\r\n\r\n  async _typeNode(parent, node, signal, options) {\r\n    const children = Array.from(node.childNodes);\r\n\r\n    for (let child of children) {\r\n      if (signal.aborted || !this._parentStillExists(parent)) break;\r\n\r\n      if (\r\n        child.nodeType === Node.TEXT_NODE &&\r\n        child.textContent.trim().length > 0\r\n      ) {\r\n        await this._typeText(child.textContent, parent, signal, options);\r\n      } else if (child.nodeType === Node.ELEMENT_NODE) {\r\n        const el = document.createElement(child.tagName);\r\n\r\n        for (let attr of child.attributes) {\r\n          try {\r\n            el.setAttribute(attr.name, attr.value);\r\n          } catch (e) {\r\n            console.warn(\"TypeMorph: Failed to set attribute\", attr.name, e);\r\n          }\r\n        }\r\n\r\n        parent.appendChild(el);\r\n        await this._typeNode(el, child, signal, options);\r\n      }\r\n    }\r\n  }\r\n\r\n  async _typeText(text, parent, signal, options) {\r\n    if (!text || signal.aborted || !this._parentStillExists(parent)) return;\r\n\r\n    if (this._cursorEl) {\r\n      if (this._cursorEl.parentNode) {\r\n        this._cursorEl.remove();\r\n      }\r\n      parent.appendChild(this._cursorEl);\r\n    }\r\n\r\n    const chars = Array.from(text);\r\n    let buffer = \"\";\r\n    let scrollCounter = 0;\r\n\r\n    const speed = options?.speed ?? this.speed;\r\n    const autoScroll = options?.autoScroll ?? this.config.autoScroll;\r\n    const scrollInterval = options?.scrollInterval ?? this.scrollInterval;\r\n    const chunkSize = options?.chunkSize ?? this.chunkSize;\r\n\r\n    for (let i = 0; i < chars.length; i++) {\r\n      if (signal.aborted || !this._parentStillExists(parent)) break;\r\n\r\n      buffer += chars[i];\r\n\r\n      const append = buffer.length >= chunkSize || i === chars.length - 1;\r\n      if (append) {\r\n        this._appendTextToParent(parent, buffer);\r\n        buffer = \"\";\r\n        scrollCounter++;\r\n        if (autoScroll && scrollCounter >= scrollInterval) {\r\n          this._scrollToEnd(options.scrollContainer);\r\n          scrollCounter = 0;\r\n        }\r\n      }\r\n\r\n      if (this._parentStillExists(parent) && append)\r\n        await this._delay(speed, signal);\r\n    }\r\n\r\n    if (autoScroll) {\r\n      this._scrollToEnd(options.scrollContainer);\r\n    }\r\n  }\r\n\r\n  _appendTextToParent(parent, text) {\r\n    if (!this._parentStillExists(parent)) return;\r\n\r\n    if (this._cursorEl) {\r\n      let previousSibling = this._cursorEl.previousSibling;\r\n      if (previousSibling && previousSibling.nodeType === Node.TEXT_NODE) {\r\n        previousSibling.textContent += text;\r\n      } else {\r\n        const newTextNode = document.createTextNode(text);\r\n        parent.insertBefore(newTextNode, this._cursorEl);\r\n      }\r\n    } else {\r\n      if (parent.lastChild && parent.lastChild.nodeType === Node.TEXT_NODE) {\r\n        parent.lastChild.textContent += text;\r\n      } else {\r\n        const newTextNode = document.createTextNode(text);\r\n        parent.appendChild(newTextNode);\r\n      }\r\n    }\r\n  }\r\n\r\n  async _onFinish(options) {\r\n    this._clearCursorIfNeeded(options);\r\n    await safeCallback(options?.onFinish ?? this.config.onFinish, this);\r\n  }\r\n\r\n  _clearContent(parent) {\r\n    parent.innerHTML = \"\";\r\n    if (this._cursorEl) parent.appendChild(this._cursorEl);\r\n  }\r\n\r\n  _clearCursorIfNeeded(options = {}) {\r\n    if (\r\n      options?.hideCursorOnFinishTyping ??\r\n      this.config.hideCursorOnFinishTyping\r\n    ) {\r\n      this._removeCursor();\r\n    }\r\n  }\r\n\r\n  _removeCursor() {\r\n    if (this._cursorEl) {\r\n      this._cursorEl.remove();\r\n      this._cursorEl = null;\r\n    }\r\n  }\r\n\r\n  async _backspaceContent(parent, node, signal, options) {\r\n    if (signal.aborted || !this._parentStillExists(parent)) return;\r\n\r\n    const children = Array.from(node.childNodes);\r\n\r\n    for (let i = children.length - 1; i >= 0; i--) {\r\n      const child = children[i];\r\n      if (signal.aborted || !this._parentStillExists(parent)) return;\r\n\r\n      if (this._cursorEl && child === this._cursorEl) {\r\n        continue;\r\n      }\r\n\r\n      if (child.nodeType === Node.TEXT_NODE) {\r\n        await this._backspaceTextNode(child, parent, signal, options);\r\n      } else if (child.nodeType === Node.ELEMENT_NODE) {\r\n        await this._backspaceContent(parent, child, signal, options);\r\n\r\n        if (!signal.aborted) {\r\n          child.parentNode.removeChild(child);\r\n          if (this._cursorEl) {\r\n            this._appendCursorToLastTextNode(parent);\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    this._cleanEmptyTextNodes(parent);\r\n  }\r\n\r\n  _appendCursorToLastTextNode(parent) {\r\n    const lastTextNode = this._findLastTextNode(parent);\r\n    if (lastTextNode && lastTextNode.parentNode) {\r\n      lastTextNode.parentNode.appendChild(this._cursorEl);\r\n    } else {\r\n      parent.appendChild(this._cursorEl);\r\n    }\r\n  }\r\n\r\n  _findLastTextNode(element) {\r\n    const childNodes = Array.from(element.childNodes);\r\n\r\n    for (let i = childNodes.length - 1; i >= 0; i--) {\r\n      const child = childNodes[i];\r\n      if (child == this._cursorEl) continue;\r\n      if (child.nodeType === Node.TEXT_NODE) {\r\n        if (child.textContent && child.textContent.trim().length > 0) {\r\n          return child;\r\n        }\r\n      } else if (child.nodeType === Node.ELEMENT_NODE) {\r\n        const lastTextInChild = this._findLastTextNode(child);\r\n        if (lastTextInChild) {\r\n          return lastTextInChild;\r\n        }\r\n      }\r\n    }\r\n\r\n    return null;\r\n  }\r\n\r\n  _cleanEmptyTextNodes(parent) {\r\n    const children = Array.from(parent.childNodes);\r\n    children.forEach((child) => {\r\n      if (\r\n        child.nodeType === Node.TEXT_NODE &&\r\n        (!child.textContent || child.textContent.trim().length === 0)\r\n      ) {\r\n        child.parentNode.removeChild(child);\r\n      }\r\n    });\r\n  }\r\n\r\n  async _backspaceTextNode(node, parent, signal, options) {\r\n    const chars = Array.from(node.textContent);\r\n    let deleteCount = 0;\r\n    let scrollCounter = 0;\r\n\r\n    const chunkSize = options?.chunkSize ?? this.config.chunkSize;\r\n    const autoScroll = options?.autoScroll ?? this.config.autoScroll;\r\n\r\n    for (let i = chars.length - 1; i >= 0; i -= chunkSize) {\r\n      if (signal.aborted || !this._parentStillExists(parent)) break;\r\n\r\n      const chunkStart = Math.max(0, i - chunkSize + 1);\r\n      const charsToKeep = chars.slice(0, chunkStart);\r\n      const scrollInterval = options?.scrollInterval ?? this.scrollInterval;\r\n      const backspaceSpeed = options?.backspaceSpeed ?? this.backspaceSpeed;\r\n\r\n      node.textContent = charsToKeep.join(\"\");\r\n      deleteCount += i - chunkStart + 1;\r\n\r\n      scrollCounter++;\r\n      if (autoScroll && scrollCounter >= scrollInterval) {\r\n        if (node.parentNode) {\r\n          this._scrollToEnd(options.scrollContainer);\r\n        }\r\n        scrollCounter = 0;\r\n      }\r\n\r\n      if (this._parentStillExists(parent))\r\n        await this._delay(backspaceSpeed, signal);\r\n    }\r\n\r\n    if (\r\n      this._parentStillExists(parent) &&\r\n      node.parentNode &&\r\n      !node.textContent\r\n    ) {\r\n      node.parentNode.removeChild(node);\r\n    }\r\n\r\n    if (autoScroll && this._parentStillExists(parent) && node.parentNode) {\r\n      this._scrollToEnd(options.scrollContainer);\r\n    }\r\n  }\r\n\r\n  _resolveParent(parent = null) {\r\n    return this._validateElement(parent ?? this.parent);\r\n  }\r\n\r\n  _getScrollContainer(currentParent, options) {\r\n    if (options?.scrollContainer)\r\n      this._validateElement(options.scrollContainer);\r\n    return this.scrollContainer ?? currentParent;\r\n  }\r\n\r\n  _setParent(parent) {\r\n    this.parent = this._validateElement(parent);\r\n  }\r\n\r\n  _setScrollContainer(element) {\r\n    this.scrollContainer = this._validateElement(element);\r\n  }\r\n\r\n  _validateElement(element) {\r\n    const htmlEl = this._getElement(element);\r\n    const isHtmlElement = htmlEl instanceof Element;\r\n\r\n    if (!htmlEl || !isHtmlElement) {\r\n      if (typeof element === \"string\") {\r\n        throw new Error(\r\n          `TypeMorph: Element not found for selector #${element}`\r\n        );\r\n      } else {\r\n        throw new Error(\r\n          `TypeMorph: Element is not a valid HTML element or element ID`\r\n        );\r\n      }\r\n    }\r\n\r\n    return htmlEl;\r\n  }\r\n\r\n  _getElement(element) {\r\n    return typeof element === \"string\"\r\n      ? document.getElementById(element)\r\n      : element;\r\n  }\r\n\r\n  _resolveText(text = null) {\r\n    return this._validateText(text ?? this.text);\r\n  }\r\n\r\n  _setText(text) {\r\n    this.text = this._validateText(text);\r\n  }\r\n\r\n  _validateText(text) {\r\n    if (text == null) {\r\n      throw new Error(\"[TypeMorph] Please provide a valid text\");\r\n    }\r\n\r\n    if (typeof text !== \"string\") {\r\n      console.warn(\r\n        `[TypeMorph] Non-string input (${typeof text}) auto-converted to string.`\r\n      );\r\n      text = String(text);\r\n    }\r\n\r\n    return text;\r\n  }\r\n\r\n  _currentlyLooping(parent) {\r\n    return this._isTyping && this._parentStillExists(parent);\r\n  }\r\n\r\n  _checkLifetime() {\r\n    if (this._destroyed) {\r\n      throw new Error(\"TypeMorph: Cannot call method on destroyed instance\");\r\n    }\r\n  }\r\n\r\n  async _delay(ms, signal) {\r\n    return new Promise((resolve) => {\r\n      const timer = setTimeout(() => {\r\n        this._activeTimers.delete(timer);\r\n        resolve();\r\n      }, ms);\r\n\r\n      this._activeTimers.add(timer);\r\n\r\n      signal.addEventListener(\r\n        \"abort\",\r\n        () => {\r\n          clearTimeout(timer);\r\n          this._activeTimers.delete(timer);\r\n          resolve();\r\n        },\r\n        { once: true }\r\n      );\r\n    });\r\n  }\r\n\r\n  async _startOperation(operation) {\r\n    if (this._abortController) {\r\n      this._abortController.abort();\r\n    }\r\n\r\n    const controller = new AbortController();\r\n    this._abortController = controller;\r\n\r\n    this._operationQueue = (async () => {\r\n      try {\r\n        await operation(controller.signal);\r\n      } catch (err) {\r\n        if (err.name !== \"AbortError\") throw err;\r\n      } finally {\r\n        if (this._abortController === controller) {\r\n          this._abortController = null;\r\n        }\r\n        this._clearScrollListener();\r\n      }\r\n    })();\r\n\r\n    return this._operationQueue;\r\n  }\r\n\r\n  async _cancelCurrentOperation(options = {}) {\r\n    if (this._abortController) {\r\n      this._abortController.abort();\r\n    }\r\n\r\n    if (this._operationQueue) {\r\n      try {\r\n        await this._operationQueue;\r\n      } catch {}\r\n    }\r\n\r\n    this._isTyping = false;\r\n    this._clearCursorIfNeeded(options);\r\n    this._clearScrollListener();\r\n  }\r\n\r\n  _parentStillExists(parent) {\r\n    return parent && parent.isConnected;\r\n  }\r\n\r\n  _validateOptions(options) {\r\n    if (!options) return;\r\n\r\n    if (\r\n      (options.chunkSize != null && typeof options.chunkSize != \"number\") ||\r\n      options.chunkSize < 1\r\n    )\r\n      throw new Error(\"TypeMorph: chunkSize has to be a number > 0\");\r\n\r\n    if (\r\n      (options.loopCount != null && typeof options.loopCount != \"number\") ||\r\n      options.loopCount < 0\r\n    )\r\n      throw new Error(\"TypeMorph: loopCount has to be a number >= 0\");\r\n\r\n    if (\r\n      (options.speed != null && typeof options.speed != \"number\") ||\r\n      options.speed < 0\r\n    )\r\n      throw new Error(\"TypeMorph: speed has to be a number >= 0\");\r\n\r\n    if (\r\n      (options.backspaceSpeed != null &&\r\n        typeof options.backspaceSpeed != \"number\") ||\r\n      options.backspaceSpeed < 0\r\n    )\r\n      throw new Error(\"TypeMorph: backspaceSpeed has to be a number >= 0\");\r\n  }\r\n\r\n  _readOptions(_parent, _options) {\r\n    if (_parent && typeof _parent === \"object\" && !(\"nodeType\" in _parent)) {\r\n      _options = _parent;\r\n      _parent = null;\r\n    }\r\n    return { _parent, _options };\r\n  }\r\n\r\n  _scrollToEnd(parent) {\r\n    if (parent.scrollHeight <= parent.clientHeight) return;\r\n    if (this._userScrolled) return;\r\n    parent.scrollTo({\r\n      top: parent.scrollHeight - parent.clientHeight,\r\n      behavior: \"smooth\",\r\n    });\r\n  }\r\n\r\n  _setupScrollTracking(parent) {\r\n    this._clearScrollListener();\r\n\r\n    const handler = () => {\r\n      const distanceToBottom =\r\n        parent.scrollHeight - parent.scrollTop - parent.clientHeight;\r\n      this._userScrolled = distanceToBottom > 0;\r\n    };\r\n\r\n    parent.addEventListener(\"scroll\", handler, { passive: true });\r\n    this._scrollListener = { element: parent, handler };\r\n  }\r\n\r\n  _clearScrollListener() {\r\n    if (this._scrollListener) {\r\n      this._scrollListener.element.removeEventListener(\r\n        \"scroll\",\r\n        this._scrollListener.handler\r\n      );\r\n      this._scrollListener = null;\r\n    }\r\n    this._userScrolled = false;\r\n  }\r\n}\r\n\r\nlet loadedDeps = null;\r\nasync function getDeps() {\r\n  if (loadedDeps) return loadedDeps;\r\n\r\n  try {\r\n    const markedLib = await import(\"marked\");\r\n    const DOMPurify = (await import(\"dompurify\")).default;\r\n\r\n    loadedDeps = { marked: markedLib.marked, DOMPurify };\r\n    return loadedDeps;\r\n  } catch (error) {\r\n    console.error(\r\n      \"Failed to load dependencies, you may be using the Core version of the library. In that case, eithter turn off markdown and html parsing or provide your own parser and sanitizer\"\r\n    );\r\n    throw error;\r\n  }\r\n}\r\n"],"names":[],"mappings":"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"}